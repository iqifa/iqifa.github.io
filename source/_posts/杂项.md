---
title: 杂项
date: 2023-12-31 00:38:07
tags: Unity
---
### 编辑器标头
部分Unity编辑器的知识，现在还不知道放在那里

        [SerializeFiled]
即Unity中的[序列化](#序列化)的一种特性，Unity默认对public变量序列化使其能够在Inspector界面显示以及修改

    对于private变量，想要在其他类中通过代码修改或者是在检视界面修改对应值，可以使用
    [SerializeFiled]
        private string value;
        

    而想要可以通过代码赋值，而又不想显示在编辑器中则使用
    [HideInspector][SerializeFiled]
        private string vaule;
    

    [HideInspector]
    将变量从检视界面隐藏，也可用于public类型的变量
---------
    [DidReloadScripts]
    在Unity重新加载脚本时执行

---
### 程序集
    [Assembly]
    C#程序集

c#中反射机制即使用此种实现，程序集中包含了类的所在位置，如此可以使得在运行时获得类的信息。也可以通过此种方法生成类的对象即反射。

---
### 协程
Unity里很少使用多线程而以协程代替，即将程序运行分在在多帧中执行，如下即为协程使用
```c#
    IEnumerator function(args...)
    {
        //结束，并在下帧重新执行
        yield return 0;
        yield return null;
        //结束并等待规定时间后重新执行
        yield return new WairForSeconds(time);
        //结束并开启新协程
        yield return StartCoroutine(function(args...))
    }

    void Update()
    {
        if(true)
        {
            //开始协程
            StartCoroutine(function(args...));
        }


        if(true)
        {
            //停止协程
            StopCoroutine(function(args...));
        }
    }

//Example 加载场景
    IEnumerator LoadScene()
    {
        AsyncOperation _loadserver = SceneManager.LoadSceneAsync("Cybe");
        while (!_loadserver.isDone)
        {
            yield return null;
        }
    }

```
### Destory()&DestoryImmediate()
1. **Destory(GameObject)** 只是标识销毁，<font color=red>在当前帧中仍然可以调用,当前帧结束才会删除</font>，使用异步执行
2. **DestoryImmediate(GameObject)** 立即销毁，<font color=yellow>将gameobject设为null，但是耗费时间，影响主线程性能</font>  

示例代码
```C#
    public GameObject gameobject_Parent;
    public GameObject gameobject_Child;

    gameobject_Child.transform.SetParent(gameobject_Parent.transform);

    //输出为1
    Destroy(gameobject_Child);
    Debug.Log(gameobject_Parent.transform.childCount);
    
    //输出为0
    DestoryImmediate(gameobject_Child);
    Debug.Log(gameobject_Parent.transform.childCount);
```
#### Destory()&DestoryImmediate()&OnDestory()
**Destory(GameObject)** 标识销毁，在当前帧结束时统一销毁并调用OnDestory()
**DestoryImmediate(GameObject)** 立即销毁并调用OnDestory()
```C#
//脚本1
public class Test_Scripts : MonoBehaviour
{
    public GameObject GameObject_Parent;
    public GameObject GameObject_Child;

    private void Start()
    {
        GameObject_Child.transform.SetParent(GameObject_Parent.transform);
        
    }

    private void Update()
    {
        if (Input.GetKeyDown(KeyCode.A))
        {
            //Debug
            //Destory
            //Destory Child
            Destroy(GameObject_Child);
            Debug.Log("Destory");


            //Debug
            //Destory Child
            //Destory 
            DestroyImmediate(GameObject_Child);
            Debug.Log("Destory");
        }
    }
}


//脚本2 赋予被删除的脚本
public class Child : MonoBehaviour
{
    public GameObject Parent;
    private void OnDestroy()
    {
        Debug.Log("Destory Child");
    }
}
```