---
title: 差分数组
date: 2025-05-22 21:35:49
categories: [算法,数组]
---
## 差分数组
对于一维数组进行区间处理时可以采用差分数组的方式，所谓差分数组，即数组元素间差值的数组，如
<p align="center">a={1,1,3,4,5}</p>
 其对应的差分数组为 
 <p align="center">diff={1,0,2,1,1}</p>
 而对原数组中元素进行区间操作时，只需要改变差分数组两端的数据，比如对原数组的`[1,3]`区间减一，那么
  <p align="center">a={1,0,2,3,5}</p>
 需要改变`left-right+1=3`的数据，而改变差分数组
 <p align="center">diff={1,-1,2,1,2}</p>
 只需要在两端进行修改即可。

 ![alt text](image.png)

 [练习题目](https://leetcode.cn/problems/zero-array-transformation-i/description/)
 [参考](https://leetcode.cn/problems/car-pooling/solutions/2550264/suan-fa-xiao-ke-tang-chai-fen-shu-zu-fu-9d4ra/)

 ```c++
bool isZeroArray(vector<int>& nums, vector<vector<int>>& queries) {
    ranges::sort(queries, {}, [](auto& q) {return q[0];});//按左端点大小排序区间


    int len = nums.size();
    vector<int>diff(len+1);
    diff[0] = nums[0];

    for (int i = 1;i < len;i++)
    {
        diff[i] = nums[i] - nums[i - 1];//Init diff
    }


    for (auto querie : queries)
    {
        auto left = querie[0], right = querie[1];


        diff[left]--;//Update diff
        diff[right]++;
    }
    int res = 0;
    for (int i = 0;i < len;i++)
    {
        res += diff[i];


        if (res > 0)
            return false;
    }
    return true;
}

 ```